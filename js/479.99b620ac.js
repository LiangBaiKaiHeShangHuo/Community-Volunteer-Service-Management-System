"use strict";(self["webpackChunkvolunteer"]=self["webpackChunkvolunteer"]||[]).push([[479],{3479:function(e,s,a){a.r(s),a.d(s,{default:function(){return C}});var t=a(6768),i=a(5130),n=a(4232);const o={id:" login",class:"content-page"},r={style:{"max-width":"450px",margin:"0 auto",background:"white","border-radius":"16px","box-shadow":"var(--card-shadow)",overflow:"hidden",width:"430px"}},l={style:{padding:"30px"}},c={class:"form-group"},d={class:"yonghumingcuowu"},h={class:"form-group"},m={class:"yonghumingcuowu"},u={class:"form-group"},p={class:"yonghumingcuowu"},w={class:"form-group"},g={class:"verification-group"},y=["disabled"],f={class:"yonghumingcuowu",id:"confirm-password-error",style:{"margin-bottom":"10px"}},b=["disabled"],v={style:{display:"flex","justify-content":"center","align-items":"center","margin-top":"20px"}};function k(e,s,a,k,L,x){return(0,t.bo)(((0,t.uX)(),(0,t.CE)("div",o,[(0,t.Lk)("div",r,[s[16]||(s[16]=(0,t.Lk)("div",{style:{background:"var(--primary-color)",color:"white","text-align":"center",padding:"30px"}},[(0,t.Lk)("h2",{style:{"font-size":"28px","margin-bottom":"10px"}},"忘记密码"),(0,t.Lk)("p",null,"志愿社区管家平台")],-1)),(0,t.Lk)("div",l,[(0,t.Lk)("div",c,[s[11]||(s[11]=(0,t.Lk)("label",{for:"login-username"},"电子邮箱",-1)),(0,t.bo)((0,t.Lk)("input",{type:"text",id:"login-username",class:"form-control",placeholder:"请输入邮箱",name:"email","onUpdate:modelValue":s[0]||(s[0]=e=>L.email=e),onInput:s[1]||(s[1]=(...e)=>x.yhemail&&x.yhemail(...e))},null,544),[[i.Jo,L.email]]),(0,t.Lk)("span",d,(0,n.v_)(L.cwemail),1)]),(0,t.Lk)("div",h,[s[12]||(s[12]=(0,t.Lk)("label",{for:"login-password"},"输入新密码",-1)),(0,t.bo)((0,t.Lk)("input",{type:"password",class:"form-control",placeholder:"请输入密码",name:"Password","onUpdate:modelValue":s[2]||(s[2]=e=>L.newpassword=e),onInput:s[3]||(s[3]=(...e)=>x.yhnewpassword&&x.yhnewpassword(...e))},null,544),[[i.Jo,L.newpassword]]),(0,t.Lk)("span",m,(0,n.v_)(L.cwnewpassword),1)]),(0,t.Lk)("div",u,[s[13]||(s[13]=(0,t.Lk)("label",{for:"login-password"},"再次输入密码",-1)),(0,t.bo)((0,t.Lk)("input",{type:"password",id:"login-password",class:"form-control",placeholder:"请输入密码",name:"Password","onUpdate:modelValue":s[4]||(s[4]=e=>L.agrepassword=e),onBlur:s[5]||(s[5]=(...e)=>x.yhagrepassword&&x.yhagrepassword(...e))},null,544),[[i.Jo,L.agrepassword]]),(0,t.Lk)("span",p,(0,n.v_)(L.cwagrepassword),1)]),(0,t.Lk)("div",w,[s[14]||(s[14]=(0,t.Lk)("label",{for:"verification-code"},"验证码",-1)),(0,t.Lk)("div",g,[(0,t.bo)((0,t.Lk)("input",{type:"text",id:"verification-code",class:"form-control",placeholder:"请输入6位验证码",name:"verificationCodes","onUpdate:modelValue":s[6]||(s[6]=e=>L.yanzhengma=e),onInput:s[7]||(s[7]=e=>x.shuruyanzhengma())},null,544),[[i.Jo,L.yanzhengma]]),(0,t.Lk)("button",{disabled:L.isDisabled,type:"button",style:{width:"100px"},class:"verification-code-btn",id:"verification-btn",onClick:s[8]||(s[8]=(...e)=>x.btnyanzhengma&&x.btnyanzhengma(...e))},(0,n.v_)(L.textverificationCodes),9,y)]),(0,t.Lk)("span",f,(0,n.v_)(L.cwyanzhengma),1)]),(0,t.Lk)("button",{disabled:L.isDisabledqs,class:"btn btn-primary btn-block",id:"loginBtn",type:"submit",onClick:s[9]||(s[9]=(...e)=>x.OkAgrePassword&&x.OkAgrePassword(...e))},s[15]||(s[15]=[(0,t.Lk)("span",null,"确定更改",-1)]),8,b),(0,t.Lk)("div",v,[(0,t.Lk)("label",{style:{"margin-left":"5px",color:"var(--primary-color)",cursor:"pointer"},onClick:s[10]||(s[10]=(...e)=>x.fanhuidenglu&&x.fanhuidenglu(...e))},"返回登录")])])])],512)),[[i.aG,e.$store.state.isdenglushow]])}a(4114);var L=a(6458),x={data(){return{email:"",cwemail:"",isemail:"",newpassword:"",cwnewpassword:"",agrepassword:"",cwagrepassword:"",yanzhengma:"",cwyanzhengma:"",isDisabled:!1,textverificationCodes:"获取验证码",isDisabledqs:!1}},methods:{btnyanzhengma(){let e;this.isDisabled=!0,this.isemail?(0,L.A)({reqBody:{email:this.email},reqUrl:"http://8.148.31.153:3030/verificationCodes",callback:(s,a)=>{try{const t=JSON.parse(a);if(!s){this.$store.commit("tanchaung","验证码已发送，注意查收"),this.$store.commit("tanchuangshow",!0);let s=60;if(e=setInterval(()=>{this.textverificationCodes=s,0==s&&(s=60,clearInterval(e),e=null,this.textverificationCodes="获取验证码",this.isDisabled=!1),s--},1e3),!t.success)return this.$store.commit("tanchaung","用户已存在"===t.message.msg?"用户已存在":"发送失败"),void this.$store.commit("tanchuangshow",!0)}}catch(s){console.log(s)}}}):(this.$store.commit("tanchaung","电子邮件格式不正确"),this.$store.commit("tanchuangshow",!0),this.isDisabled=!1)},OkAgrePassword(){(0,L.A)({reqBody:{email:this.email,verificationCodes:this.yanzhengma,upPass:this.agrepassword},reqUrl:"http://8.148.31.153:3030/forgetPass",callback:(e,s)=>{const a=JSON.parse(s);try{a.success?(this.$store.commit("tanchaung","修改成功，即将前往登录"),this.$store.commit("tanchuangshow",!0),this.$router.push({name:"UserLogin"})):(this.$store.commit("tanchaung","验证码错误,请输入正确验证码"==a.message.msg?"验证码错误":"修改失败"),this.$store.commit("tanchuangshow",!0))}catch(e){console.log(e)}}})},yhemail(){return""===this.email?(this.cwemail="电子邮件不能为空",void(this.isemail=!1)):/\s/.test(this.email)?(this.cwemail="电子邮件不能有空格",void(this.isemail=!1)):/^[a-zA-Z0-9\u4e00-\u9fa5._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(this.email)?this.email.length>64?(this.cwemail="电子邮件不应超过64个字符",void(this.isemail=!1)):(this.cwemail="",void(this.isemail=!0)):(this.cwemail="电子邮件格式不正确",void(this.isemail=!1))},yhnewpassword(){/^.{8,16}$/.test(this.newpassword)?this.cwnewpassword="":""===this.newpassword?this.cwnewpassword="密码不能为空":this.cwnewpassword="密码应为8~16个字符"},yhagrepassword(){this.newpassword==this.agrepassword?this.cwagrepassword="":this.cwagrepassword="第二次密码错误"},shuruyanzhengma(){if(!/^\d*$/.test(this.yanzhengma))return this.yanzhengma="",void(this.cwyanzhengma="只能输入数字");this.yanzhengma.length>6?(this.yanzhengma="",this.cwyanzhengma="验证码必须是6位数字"):this.cwyanzhengma=""},fanhuidenglu(){this.$router.push({name:"UserLogin"})}}},z=a(1241);const $=(0,z.A)(x,[["render",k],["__scopeId","data-v-f2ca7f1e"]]);var C=$},6458:function(e,s,a){a.d(s,{A:function(){return t}});a(8111),a(7588);function t({reqBody:e={},reqMethod:s="post",reqUrl:a="",async:t=!0,reqHeader:i={"Content-Type":"application/x-www-form-urlencoded"},callback:n}){let o=null,r=null;switch(Object.values(i)[0]){case"application/x-www-form-urlencoded":o=new URLSearchParams,Object.entries(e).forEach(([e,s])=>{o.append(e,s)}),r=o.toString();break;case"application/json":o=JSON.stringify(e),r=o;break}let l=new XMLHttpRequest;l.open(s,a,t),Object.entries(i).forEach(([e,s])=>{l.setRequestHeader(e,s)}),l.onload=function(){l.status>=200&&l.status<300?n(null,l.response):n(new Error(`请求失败，状态码：${l.status}`))},l.onerror=function(){n(new Error("网络错误"))},l.send(r)}}}]);
//# sourceMappingURL=479.99b620ac.js.map